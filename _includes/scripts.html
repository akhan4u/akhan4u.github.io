{%- if site.github.build_revision -%}
  {%- assign build_version = site.github.build_revision -%}
{%- else -%}
  {%- assign build_version = site.time | date: '%Y%m%d%H%M%S' -%}
{%- endif -%}

<!-- Core JavaScript -->
<script charset="utf-8" async src="/assets/js/scripts.min.js?v={{ build_version }}"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
{% if site.google_analytics_id and jekyll.environment == "production" %}
<script async src="https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics_id }}"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '{{ site.google_analytics_id }}');
  {% if page.url == "/404.html" %}
  gtag('config', '{{ site.google_analytics_id_2 }}', {
    'page_title' : '404 Response',
    'page_location': window.location.href,
    'page_path': window.location.pathname
  });
  {% endif %}
</script>
{% endif %}
